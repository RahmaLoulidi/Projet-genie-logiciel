<app-header></app-header>
    <app-side-navbar></app-side-navbar>
    <app-side-bar-chat></app-side-bar-chat>
<div class="content-wrapper">
  <!-- Container-fluid starts -->
  <div class="container-fluid notifications">
     <!-- Main content starts -->
     <div class="btn-page">
        <!-- Row Starts -->
        <div class="row">
           <div class="col-lg-12 p-0">
              <div class="main-header">
                 <h4>Besoins</h4>
                 
              </div>
           </div>
        </div>

   <div>
   <label for="type">Type:</label>
   <select class="form-control" id="type" (change)="onTypeChange($event)"  name="type" formControlName="type" style="width: 200px;" >
     <option>Ordinateur</option>
     <option>Imprimante</option>
   </select>
   </div>
   <br>
   

   <!-- Tab panes -->
   
      <div class="tab-pane active" id="home3" role="tabpanel">
      <!-- Basic Table starts -->
      <div class="container" id="main-container">
         <div class="card">
        
                     <table class="table" *ngIf="showOrdianteurInputs == 'Ordinateur' ">
                        <thead>
                           <tr>
                              <th>Marque</th>
                              <th>CPU</th>
                              <th>Disque dur</th>
                              <th>Ecran</th>
                              <th>RAM</th>
                              <th>Action</th>
                       
                           </tr>
                        </thead>
                        <tbody>
                           <tr *ngFor="let o of ordinateurs">
                              <td>{{o.marque}}</td>
                              <td>{{o.cpu}}</td>
                              <td>{{o.disqueDur}}</td>
                              <td>{{o.ecran}}</td>
                              <td>{{o.ram}}</td>
                              <td> <button (click)="onOpenModal(o.id,'panneOrd')" type="submit" class="btn btn-success waves-effect waves-light" >Signaler Panne</button></td>
                             
                        
              
                              <!--<td><a class="btn btn-primary tooltips" (click)="onOpenModal(besoin, 'add')">Ajouter<span class="sr-only">(current)</span></a></td>-->
                              
                           </tr>
                        </tbody>
                     </table>
                     <table class="table" *ngIf="showOrdianteurInputs == 'Imprimante' ">
                        <thead>
                           <tr>
                              <th>Marque</th>
                              <th>Resolution</th>
                              <th>Vitesse</th>
                              <th>Action</th>
                      
                           </tr>
                        </thead>
                        <tbody>
                           <tr *ngFor="let i of imprimantes">
                              <td>{{i.marque}}</td>
                              <td>{{i.resolution}}</td>
                              <td>{{i.vitesse}}</td>
                     
                              <td> <button (click)="onOpenModal(i.id,'panneImp')" type="submit" class="btn btn-success waves-effect waves-light" >Signaler Panne</button></td>
                             
                           </tr>
                        </tbody>
                     </table>

                     

   
            
         </div>
      </div>  
   </div>

    <!-- Add Panne Modal -->
<div class="modal fade" id="addPanneOModal" tabindex="-1" role="dialog" aria-labelledby="addPanneOModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title" id="addPanneOModalLabel">Ajouter Panne</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
         </div>
         <div class="modal-body">
            <form #addPanneO="ngForm" (ngSubmit)="onSubmitOrd(addPanneO)">
             <div class="form-group">
               <label for="codeBarre">Explication</label>
               <input type="text" class="form-control" [(ngModel)]="panne.explication" name="explication" id="explication" placeholder="explication" required>
            </div>
            <div class="form-group">
               <label for="dateLivraison">Date de panne</label>
               <input class="form-control" type="date" id="datePanne" [(ngModel)]="panne.datePanne" name="datePanne" >
            </div>
            
            <div class="modal-footer">
               <button [disabled]="addPanneO.invalid" type="submit" class="btn btn-primary" >Enregistrer</button>
            </div>
            </form>
         </div>
      </div>
    </div>
 
 </div>
 </div>
 </div>
 </div>

 <!-- Add Panne Modal -->
<div class="modal fade" id="addPanneIModal" tabindex="-1" role="dialog" aria-labelledby="addPanneIModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title" id="addPanneIModalLabel">Ajouter Panne</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
         </div>
         <div class="modal-body">
            <form #addPanneI="ngForm" (ngSubmit)="onSubmitImp(addPanneI)">
             <div class="form-group">
               <label for="codeBarre">Explication</label>
               <input type="text" class="form-control" [(ngModel)]="panne.explication" name="explication" id="explication" placeholder="explication" required>
            </div>
            <div class="form-group">
               <label for="dateLivraison">Date de panne</label>
               <input class="form-control" type="date" id="datePanne" [(ngModel)]="panne.datePanne" name="datePanne" >
            </div>
            
            <div class="modal-footer">
               <button [disabled]="addPanneI.invalid" type="submit" class="btn btn-primary" >Enregistrer</button>
            </div>
            </form>
         </div>
      </div>
    </div>
 
 </div>
 
 