<app-header></app-header>
<app-side-navbar></app-side-navbar>
<app-side-bar-chat></app-side-bar-chat>
<div class="content-wrapper">

  <div class="" id="emailModal">
    <div class=" width-100">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="emailModalLabel">Composer un message</h5>
          <button type="button" class="float-right btn btn-danger " (click)="toggleSendMessage()">
            {{showSendMessage ? 'X' : '+'}}
          </button>
        </div>
        <div class="modal-body" *ngIf="showSendMessage">
          <form (ngSubmit)="addMessage()">
            <div class="mb-3">
              <label for="emailTo" class="form-label">A</label>
              <input type="text" name="emails" class="form-control" id="emailTo" [(ngModel)]="usernames"
                     placeholder="Entrer le(s) nom(s) d'utilisateur(s) séparés par une virgule">
            </div>
            <div class="mb-3">
              <label for="emailSubject" class="form-label">Objet</label>
              <input type="text" class="form-control" name="subject" [(ngModel)]="subject" id="emailSubject">
            </div>
            <div class="mb-3">
              <label for="emailBody" class="form-label">Message</label>
              <textarea class="form-control" name="message" id="emailBody" rows="3" [(ngModel)]="message"></textarea>
            </div>
          </form>
        </div>
        <div class="modal-footer" *ngIf="showSendMessage">
          <button type="submit" class="btn btn-primary" (click)="addMessage()">Envoyer</button>
        </div>
      </div>
    </div>
  </div>

  <!-- un checkbox pour afficher ou masquer les messages envoyés par l'utilisateur -->
  <div class="flex-row">
    <div class="form-check form-switch py-2">
      <input  type="checkbox"
             (change)="setShowReceived()">

      <span class="form-check-label" for="flexSwitchCheckDefault">
        {{!showReceived ?  'Voir les messages reçus'  : 'Voir les messages envoyés'}}
      </span>
    </div>

  </div>


  <!-- loop through messages -->
  <div class="flex-row p-x-2">
    <div class="card" *ngFor="let message of messages">
      <app-message-frame [message]="message"></app-message-frame>
    </div>

  </div>

  <!--form modal-->
  <div
    class="modal fade"
    id="myModal"
    tabindex="-1"
    aria-labelledby="exampleModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Bootstrp Modal</h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body">
          <h3>Hello!</h3>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
            Close
          </button>
          <button type="button" class="btn btn-primary">
            Save changes
          </button>
        </div>
      </div>
    </div>
  </div>
  </div>
